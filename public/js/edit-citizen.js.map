{"version":3,"sources":["edit-citizen.coffee"],"names":[],"mappings":"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","file":"edit-citizen.js","sourcesContent":["data = {_token:$('[name=\"_token\"]').val()}\n\ngetInfo = ->\n\tprenume = $('#prenume')\n\tnume = $('#nume')\n\tsite = $('#site')\n\temail = $('#email')\n\temail2 = $('#email2')\n\ttelefon = $('#telefon')\n\tfacebook_profil = $('#facebook_profil')\n\tfacebook_pagina = $('#facebook_pagina')\n\tobservatii = $('#observatii')\n\tcontact_id = $('#citizen_id')\n\n\tdata.nume = nume.val()\n\tdata.prenume = prenume.val()\n\tdata.site = site.val()\n\tdata.email = email.val()\n\tdata.email2 = email2.val()\n\tdata.telefon = telefon.val()\n\tdata.facebook_profil = facebook_profil.val()\n\tdata.facebook_pagina = facebook_pagina.val()\n\tdata.observatii = observatii.val()\n\tdata.contact_id = contact_id.val()\n\n\tfalse\n\n$ ->\n\n$('#edit-citizen').click (e) ->\n\te.preventDefault();\n\tprenume = $('#prenume')\n\tnume = $('#nume')\n\temail = $('#email')\n\t#Date de contact\n\tgetInfo()\n\n\temailRegex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\n\n\tif !emailRegex.test(data.email)\n\t\ttoastr.error(\"Adresa de email nu este validă!\")\n\t\temail.addClass 'invalid'\n\t\treturn\n\tif data.nume.trim() == \"\"\n\t\ttoastr.error(\"Câmpul nume nu este valid\")\n\t\tnume.addClass 'invalid'\n\t\treturn\n\tif data.prenume.trim() == \"\"\n\t\ttoastr.error(\"Câmpul prenume nu este valid\")\n\t\tprenume.addClass 'invalid'\n\t\treturn\n\n\tdata.basic = true\n\n\t$.post '/edit-citizen', data , (json) ->\n\t\tif json.success\n\t\t\tlocation.reload()\n\t\treturn\n\n\treturn\n$('#adauga-categorie').on 'change', ->\n\tcategorie = $('#adauga-categorie').val()\n\tif categorie == 'voluntar'\n\t\t$('#new-volunteer').removeClass 'hidden'\n\treturn\n\n$('#add-volunteer').click (e) ->\n\te.preventDefault();\n\t$('#add-volunteer-spinner').removeClass 'hidden'\n\t$('#add-volunteer').addClass 'hidden'\n\tdomenii_de_interes = $('#new-volunteer-domains')\n\tskills = $('#new-volunteer-skills')\n\tnume_eveniment = $('#volunteer-event-name')\n\tdetalii_eveniment = $('#volunteer-event-details')\n\trating = $('#volunteer-rating')\n\tavailability = $('#volunteer-event-availability')\n\t#iau toate detaliile personale\n\tgetInfo()\n\tdata.new_volunteer = true\n\tdata.domains_of_interest = domenii_de_interes.val()\n\tdata.skills = skills.val()\n\tdata.event_name = nume_eveniment.val()\n\tdata.event_details = detalii_eveniment.val()\n\tdata.rating = rating.val()\n\tdata.availability = availability.val()\n\n\t$.post '/edit-citizen', data , (json) ->\n\t\tif json.success\n\t\t\tlocation.reload()\n\t\telse\n\t\t\ttoastr.error(json.message)\n\t\t\t$('#add-volunteer-spinner').addClass 'hidden'\n\t\t\t$('#add-volunteer').removeClass 'hidden'\n\t\treturn\n\n\treturn\n\n$('.edit-volunteer').click (e) ->\n\te.preventDefault();\n\t$('#edit-volunteer-spinner').removeClass 'hidden'\n\t$('.edit-volunteer').addClass 'hidden'\n\t$('.delete-volunteer').addClass 'hidden'\n\tgetInfo()\n\tdata.modify_volunteer = true\n\tdata.updates = {}\n\tid = $(this).data('id')\n\tdomenii_de_interes = $('#volunteer-domains-'+id)\n\tskills = $('#volunteer-skills-'+id)\n\tnume_eveniment = $('#volunteer-event-name-'+id)\n\tdetalii_eveniment = $('#volunteer-event-details-'+id)\n\trating = $('#volunteer-rating-'+id)\n\tavailability = $('#volunteer-event-availability-'+id)\n\n\tdata.updates.id = id\n\tdata.updates.domains_of_interest = domenii_de_interes.val()\n\tdata.updates.skills = skills.val()\n\tdata.updates.event_name = nume_eveniment.val()\n\tdata.updates.event_details = detalii_eveniment.val()\n\tdata.updates.rating = rating.val()\n\tdata.updates.availability = availability.val()\n\n\t$.post '/edit-citizen', data , (json) ->\n\t\tif json.success\n\t\t\tlocation.reload()\n\t\telse\n\t\t\ttoastr.error(json.message)\n\t\t\t$('#edit-volunteer-spinner').addClass 'hidden'\n\t\t\t$('.edit-volunteer').removeClass 'hidden'\n\t\t\t$('.delete-volunteer').removeClass 'hidden'\n\t\treturn\n\n\treturn\n\n$('.delete-volunteer').click (e) ->\n\te.preventDefault();\n\t$('#edit-volunteer-spinner').removeClass 'hidden'\n\t$('.edit-volunteer').addClass 'hidden'\n\t$('.delete-volunteer').addClass 'hidden'\n\tgetInfo()\n\n\tid = $(this).data('id')\n\tdata.id = id\n\tdata.delete_volunteer = true\n\n\t$.post '/edit-citizen', data , (json) ->\n\t\tif json.success\n\t\t\tlocation.reload()\n\t\telse\n\t\t\ttoastr.error(json.message)\n\t\t\t$('#edit-volunteer-spinner').addClass 'hidden'\n\t\t\t$('.edit-volunteer').removeClass 'hidden'\n\t\t\t$('.delete-volunteer').removeClass 'hidden'\n\t\treturn\n\treturn\t\n\n$('#new-volunteer-skills').select2({\n  tags: true\n})\n$('#volunteer-rating').barrating({\ntheme: 'fontawesome-stars'\n});\n$('.volunteer-rating').barrating({\ntheme: 'fontawesome-stars'\n});\n$('.volunteer-skills').select2({\n  tags: true\n})\n"]}